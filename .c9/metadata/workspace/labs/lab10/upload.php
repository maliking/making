{"filter":false,"title":"upload.php","tooltip":"/labs/lab10/upload.php","undoManager":{"mark":15,"position":15,"stack":[[{"start":{"row":0,"column":0},"end":{"row":21,"column":2},"action":"remove","lines":["<?php","$target_dir = \"gallery/\";","$target_file = $target_dir . basename($_FILES[\"myFile\"][\"name\"]);","$uploadSuccess = 1;","","if (isset($_POST[\"submit\"])) {","    if ($_FILES[\"myFile\"][\"size\"] > 1048576) {","        echo \"Sorry, your file is too large\";","        $uploadSuccess = 0;","    }","","    if ($uploadSuccess == 0) {","        echo \"Your file was not uploaded.\";","    } else {","        if (move_uploaded_file($_FILES[\"myFile\"][\"tmp_name\"], $target_file)) {","            echo \"The file \". basename($_FILES[\"myFile\"][\"name\"]) . \" has been uploaded. \";","        } else {","            echo \"Sorry, there was an error uploading your file. \";","        }","    }","}","?>"],"id":2},{"start":{"row":0,"column":0},"end":{"row":33,"column":0},"action":"insert","lines":["    if (isset($_FILES['image'])) {","        $errors = array();","        $file_name = $_FILES['image']['name'];","        $file_size = $_FILES['image']['size'];","        $file_tmp = $_FILES['image']['tmp_name'];","        $file_type = $_FILES['image']['type'];","","        if ($file_size > 1048576) {","            echo \"<h3>File size must be under 1MB<h3>\";","            $errors[] = '<pre>File size must be under 1MB</pre>';","        }","","        if (empty($errors) == true) {","            move_uploaded_file($file_tmnp, \"gallery/\" . $file_name);","            echo \"Success\";","        }","        else {","            echo \"<h4>Your file has not been uploaded. Please try again.</h4>\";","            echo \"<pre>\";","            print_r($errors);","            echo \"</pre>\";","        }","    }","","    function displayImages() {","        if (isset($_POST['submitForm'])) {","            $files = scandir(\"gallery/\", 1);","","            for ($i = 0; $i < count($files) - 2; $i++) {","                echo \"<a href='gallery/\" . $files[$i] . \"'><img src='gallery/\" . $files[$i] . \"' width='35'></a><br>\";","            }","        }","    }",""]}],[{"start":{"row":0,"column":3},"end":{"row":1,"column":0},"action":"insert","lines":["",""],"id":3},{"start":{"row":1,"column":0},"end":{"row":1,"column":3},"action":"insert","lines":["   "]}],[{"start":{"row":0,"column":2},"end":{"row":0,"column":3},"action":"remove","lines":[" "],"id":4}],[{"start":{"row":0,"column":1},"end":{"row":0,"column":2},"action":"remove","lines":[" "],"id":5}],[{"start":{"row":0,"column":0},"end":{"row":0,"column":1},"action":"remove","lines":[" "],"id":6}],[{"start":{"row":0,"column":0},"end":{"row":0,"column":1},"action":"insert","lines":["<"],"id":7}],[{"start":{"row":0,"column":1},"end":{"row":0,"column":2},"action":"insert","lines":["?"],"id":8}],[{"start":{"row":0,"column":2},"end":{"row":0,"column":3},"action":"insert","lines":["p"],"id":9}],[{"start":{"row":0,"column":3},"end":{"row":0,"column":4},"action":"insert","lines":["h"],"id":10}],[{"start":{"row":0,"column":4},"end":{"row":0,"column":5},"action":"insert","lines":["p"],"id":11}],[{"start":{"row":34,"column":0},"end":{"row":34,"column":1},"action":"insert","lines":["?"],"id":12}],[{"start":{"row":34,"column":1},"end":{"row":34,"column":2},"action":"insert","lines":[">"],"id":13}],[{"start":{"row":25,"column":0},"end":{"row":33,"column":5},"action":"remove","lines":["    function displayImages() {","        if (isset($_POST['submitForm'])) {","            $files = scandir(\"gallery/\", 1);","","            for ($i = 0; $i < count($files) - 2; $i++) {","                echo \"<a href='gallery/\" . $files[$i] . \"'><img src='gallery/\" . $files[$i] . \"' width='35'></a><br>\";","            }","        }","    }"],"id":14}],[{"start":{"row":14,"column":39},"end":{"row":14,"column":40},"action":"remove","lines":["n"],"id":15}],[{"start":{"row":24,"column":0},"end":{"row":25,"column":0},"action":"remove","lines":["",""],"id":16}],[{"start":{"row":23,"column":5},"end":{"row":24,"column":0},"action":"remove","lines":["",""],"id":17}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":23,"column":5},"end":{"row":23,"column":5},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":33,"mode":"ace/mode/php"}},"timestamp":1512248104808,"hash":"df88f058ab7e8742964c4c0849f22d9154b39e0b"}