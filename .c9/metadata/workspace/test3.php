{"filter":false,"title":"test3.php","tooltip":"/test3.php","undoManager":{"mark":1,"position":1,"stack":[[{"start":{"row":0,"column":0},"end":{"row":55,"column":2},"action":"insert","lines":["<?php","session_start(); //starts or resumes an existing session","","","//print_r($_POST); //displays values passed from login form","","//validates the username and password","include '../../dbConnection.php';","$conn = getDatabaseConnection();","","$username = $_POST['username'];","$password = sha1($_POST['password']);","","//echo $password;","","","//Following SQL works but it allows SQL Injection!!","// $sql = \"SELECT *","//         FROM q_admin","//         WHERE username = '$username' ","//         AND   password = '$password'\";","        ","$sql = \"SELECT *","        FROM q_admin","        WHERE username = :username ","        AND   password = :password\";   ","","$namedParameters  = array();","$namedParameters[':username']  = $username;","$namedParameters[':password']  = $password;","","$stmt = $conn->prepare($sql);","$stmt->execute($namedParameters);","$record = $stmt->fetch(PDO::FETCH_ASSOC);","","//print_r($record);","","if (empty($record)) {","    ","  echo \"Wrong credentials!\";  ","  ","} else {","    ","    $_SESSION['username'] = $record['username'];","    $_SESSION['adminFullName'] = $record['firstName'] . \" \" . $record['lastName'];","   // echo $_SESSION['adminFullName'];","   //echo \"Successful login!\";","   header('Location: admin.php'); //redirects users to admin page","   ","}","","","","","","?>"],"id":1}],[{"start":{"row":19,"column":39},"end":{"row":19,"column":40},"action":"remove","lines":[" "],"id":2},{"start":{"row":21,"column":0},"end":{"row":21,"column":8},"action":"remove","lines":["        "]},{"start":{"row":24,"column":34},"end":{"row":24,"column":35},"action":"remove","lines":[" "]},{"start":{"row":25,"column":36},"end":{"row":25,"column":39},"action":"remove","lines":["   "]},{"start":{"row":38,"column":0},"end":{"row":38,"column":4},"action":"remove","lines":["    "]},{"start":{"row":39,"column":28},"end":{"row":39,"column":30},"action":"remove","lines":["  "]},{"start":{"row":40,"column":0},"end":{"row":40,"column":2},"action":"remove","lines":["  "]},{"start":{"row":42,"column":0},"end":{"row":42,"column":4},"action":"remove","lines":["    "]},{"start":{"row":48,"column":0},"end":{"row":48,"column":3},"action":"remove","lines":["   "]}]]},"ace":{"folds":[],"scrolltop":432,"scrollleft":0,"selection":{"start":{"row":42,"column":0},"end":{"row":42,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":26,"mode":"ace/mode/php"}},"timestamp":1509040311284,"hash":"7332894ceea393bee81dff2af089f8c65ad2e6dc"}