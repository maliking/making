{"changed":true,"filter":false,"title":"login.php","tooltip":"/hw/hw5/login.php","value":"<?php\nsession_start();\ninclude '../../dbConnection.php';\n$conn = getDatabaseConnection();\n\n$username = $_POST[\"username\"];\n$password = sha1($_POST[\"password\"]);\n\n$sql = \"SELECT *\n        FROM games\n        WHERE username = :username\n        AND password = :password\";\n\n$namedParameters = array();\n$namedParameters[':username'] = $username;\n$namedParameters[':password'] = $password;\n\n$stmt = $conn -> prepare($sql);\n$stmt -> execute($namedParameters);\n$record = $stmt -> fetch(PDO::FETCH_ASSOC);\n\nif (empty($record)) {\n    echo \"Wrong credentials!\";\n} else {\n    $_SESSION[\"username\"] = $record[\"username\"];\n    header('Location: quiz.php');\n}\n\n?>","undoManager":{"mark":5,"position":9,"stack":[[{"start":{"row":3,"column":30},"end":{"row":3,"column":45},"action":"remove","lines":["$dbname=\"users\""],"id":44}],[{"start":{"row":9,"column":13},"end":{"row":9,"column":18},"action":"remove","lines":["users"],"id":45},{"start":{"row":9,"column":13},"end":{"row":9,"column":14},"action":"insert","lines":["g"]}],[{"start":{"row":9,"column":14},"end":{"row":9,"column":15},"action":"insert","lines":["a"],"id":46}],[{"start":{"row":9,"column":15},"end":{"row":9,"column":16},"action":"insert","lines":["m"],"id":47}],[{"start":{"row":9,"column":16},"end":{"row":9,"column":17},"action":"insert","lines":["e"],"id":48}],[{"start":{"row":9,"column":17},"end":{"row":9,"column":18},"action":"insert","lines":["s"],"id":49}],[{"start":{"row":25,"column":2},"end":{"row":25,"column":44},"action":"remove","lines":["  $_SESSION[\"userId\"] = $record[\"userId\"];"],"id":50}],[{"start":{"row":25,"column":1},"end":{"row":25,"column":2},"action":"remove","lines":[" "],"id":51}],[{"start":{"row":25,"column":0},"end":{"row":25,"column":1},"action":"remove","lines":[" "],"id":52}],[{"start":{"row":24,"column":48},"end":{"row":25,"column":0},"action":"remove","lines":["",""],"id":53}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":9,"column":18},"end":{"row":9,"column":18},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1512151604737}